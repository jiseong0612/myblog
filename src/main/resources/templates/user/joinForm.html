<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{/layout/base :: layout(~{::main})}">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<main>
		<div class="container m-3">
			<form>
				<div class="mb-3">
					<label for="username" class="form-label">아이디</label> <input type="text" class="form-control" id="username" aria-describedby="emailHelp">
				</div>
				<div class="mb-3">
					<label for="password" class="form-label">비밀번호</label> <input type="password" class="form-control" id="password" aria-describedby="emailHelp">
				</div>
				<div class="mb-3">
					<label for="email" class="form-label">이메일</label> <input type="email" class="form-control" id="email">
				</div>
				<button type="submit" class="btn btn-primary" id="joinBtn">회원가입</button>
			</form>
		</div>
		
<script>
$(document).ready(function(){
	$('#joinBtn').on('click', function(e){
		e.preventDefault();
		
		const data ={
			username : $('#username').val(),
			password : $('#password').val(),
			email 	 :  $('#email').val(),
		};
		
		console.log(data);
		
		$.ajax({
			type : 'post',
			url : '/api/user',
			data : JSON.stringify(data),
			contentType : 'application/json; charset=utf-8',
			dataType : 'json',
		}).done(function(response){
			alert('회원가입이 완료되었습니다.');
			
			location.href= '/user/loginForm';
		}).fail(function(error){
			alert(JSON.stringify(error));
		});
	});
	
});
</script>
	</main>

</body>
</html>